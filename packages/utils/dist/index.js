"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}Object.defineProperty(exports,"__esModule",{value:!0});var timestamp=+new Date,index=0,getUid=function(e){return"".concat(0<arguments.length&&void 0!==e?e:"wya","-").concat(timestamp,"-").concat(++index)},preZero=function(e){return e<10&&0<e?"0"+e:e<=0?"00":e},def=function(e,t,r,n){Object.defineProperty(e,t,{value:r,enumerable:!!n,writable:!0,configurable:!0})},isObj=function(e){return"object"===_typeof(e)},hasOwn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},baseClone=function e(t,r){for(var n in r)hasOwn(r,n)&&(r[n]&&"object"==_typeof(r[n])?(t[n]=Array.isArray(r[n])?[]:{},e(t[n],r[n])):t[n]=r[n]);return t},cloneDeep=function(e){return e&&"object"===_typeof(e)?baseClone(Array.isArray(e)?[]:{},e):e},cloneDeepEasier=function(e){return JSON.parse(JSON.stringify(e))},formatMoney=function(e){var t=e=e||"0.00";return(t=(t=(t=(t=t.replace(/[^\d.]/g,"")).replace(/\.{2,}/g,".")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(-)*(\d+)\.(\d\d).*$/,"$1$2.$3")).indexOf(".")<0&&""!=t&&(t=parseFloat(t)),t},sum2array=function(e){return parseInt(e,10).toString(2).split("").reduce(function(e,t,r,n){return+t&&e.unshift(Math.pow(2,n.length-r-1)),e},[])},compose=function(){for(var e=arguments,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=e[n];return 0===r.length?function(e){return e}:1===r.length?r[0]:r.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})},Utils={getUid:getUid,preZero:preZero,def:def,isObj:isObj,hasOwn:hasOwn,cloneDeep:cloneDeep,cloneDeepEasier:cloneDeepEasier,formatMoney:formatMoney,sum2array:sum2array,compose:compose,set:function(e,t){if("string"==typeof e)this[e]=t;else if("object"===_typeof(e)){var r=e;for(var n in r)this[n]=r[n]}}},STORAGE_PERMISSION_ALLOW=function(){var e="test";try{return wx.setStorageSync(e,e),wx.removeStorageSync(e),!0}catch(e){return!1}}(),StorageManager=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"setVersion",value:function(e){this.version=e}},{key:"set",value:function(e,t){STORAGE_PERMISSION_ALLOW&&wx.setStorageSync(e,t)}},{key:"get",value:function(e){if(STORAGE_PERMISSION_ALLOW)return wx.getStorageSync(e)}},{key:"remove",value:function(e){STORAGE_PERMISSION_ALLOW&&wx.removeStorageSync(e)}}]),e}(),Storage=new StorageManager,URL={merge:function(e){var t=e.path,r=e.query,n=t instanceof Array?t.join("/"):t,a=[];for(var o in r)!r[o]&&!1!==r[o]&&0!==r[o]||(a=[].concat(_toConsumableArray(a),["".concat(o,"=").concat(encodeURIComponent(r[o]))]));return 0<a.length&&(n+=(-1<n.indexOf("?")?"&":"?")+a.join("&")),n},parse:function(e){e=e||"".concat(location.pathname).concat(location.search);var t,a={},r=e.split("?");return t=r[0].split("/"),1<r.length&&r[1].split("&").forEach(function(e){var t=e.split("="),r=t[0],n=decodeURIComponent(t[1]);isNaN(n)||"0"===n[0]||""===n||n>Number.MAX_SAFE_INTEGER?a[r]=n:a[r]=Number(n)}),{path:t,query:a}},get:function(e,t){t=t?t.substring(t.indexOf("?")):"";var r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=decodeURIComponent(t).substr(1).match(r);n=null!=n?unescape(n[2]):null;try{n="string"==typeof(n=JSON.parse(n))?JSON.parse(n):n}catch(e){console.log(e)}return n}},REGEX_RULES={num:{value:/^\d+(\.\d+)?$/,msg:"请输入正确数字"},integer:{value:/^[1-9]\d*$/,msg:"请输入非负整数"},email:{value:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,msg:"邮箱格式不正确"},date:{value:/^\d{4}(-|\/|\.)\d{1,2}\1\d{1,2}$/,msg:"日期格式不正确"},time:{value:/\d{4}-\d{2}-\d{2}\s+\d{2}:\d{2}/,msg:"时间格式不正确"},IDCard:{value:/(^[0-9a-zA-Z]{6,}$)/,msg:"身份证格式不正确"},price:{value:/^([1-9][\d]{0,10}|0)([.]?[\d]{1,2})?$/,msg:"请输入正确金额"},mobile:{value:/^(1[3-9][0-9])\d{8}$/,msg:"请填写正确的手机号码"},phone:{value:/^0[1-9][0-9]{1,2}-[2-8][0-9]{6,7}$/,msg:"请填写正确的电话号码"},postalCode:{value:/^\d{4}$/,msg:"请输入4位短信验证码"},zipCode:{value:/^\d{6}$/,msg:"请输入6位邮政编码"},weChat:{value:/^[a-zA-Z\d_-]{5,}$/,msg:"请输入正确的微信号"},name:{value:/^[A-Za-z0-9\u4e00-\u9fa5_-]{1,}$/,msg:"请不要输入特殊字符"},base64:{value:/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i,msg:"请输入正确的base64"},URLScheme:{value:/[a-zA-z]+:\/\/[^\s]*/,msg:"请填写正确网页地址协议"}},format=function(e){var r=0<arguments.length&&void 0!==e?e:{};return Object.keys(r).reduce(function(e,t){return e[t]=r[t].value,e["".concat(t,"Msg")]=r[t].msg,e},{})},RegExManager=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this._generate(e),this.validator=this.validator.bind(this)}return _createClass(t,[{key:"set",value:function(e,t){"string"==typeof e?this._generate(_defineProperty({},e,t)):"object"===_typeof(e)&&this._generate(e)}},{key:"validator",value:function(e,t,r){var n,a=!0;if("string"==typeof t&&(t=t.trim()),("function"==typeof e.required?(a=!e.required.length,e.required(r)):e.required)&&(!t||t instanceof Array&&!t.length))return n="".concat(e.name||"","必填"),a&&r(n),!1;for(var o=e.type instanceof Array?e.type:[e.type],i=0;i<o.length;i++){var u=o[i],s=t;if("mobile"==u&&(s=(s=s||"").replace(/\s/g,"")),!("function"==typeof u?(a=!u.length,!u(r)):this[u]&&s&&!this[u].test(s))){a&&r();break}n=e.message||e.msg||this["".concat(u,"Msg")],o.length-1==i&&a&&r(n)}}},{key:"_generate",value:function(e){var t=format(e);for(var r in t)this[r]=t[r];return this}}]),t}(),RegEx=new RegExManager(REGEX_RULES),_add=function(e,t){var r,n,a,o;try{r=e.toString().split(".")[1].length}catch(e){r=0}try{n=t.toString().split(".")[1].length}catch(e){n=0}if(o=Math.abs(r-n),a=Math.pow(10,Math.max(r,n)),0<o){var i=Math.pow(10,o);t=n<r?(e=Number(e.toString().replace(".","")),Number(t.toString().replace(".",""))*i):(e=Number(e.toString().replace(".",""))*i,Number(t.toString().replace(".","")))}else e=Number(e.toString().replace(".","")),t=Number(t.toString().replace(".",""));return(e+t)/a},_sub=function(e,t){var r,n,a;try{r=e.toString().split(".")[1].length}catch(e){r=0}try{n=t.toString().split(".")[1].length}catch(e){n=0}return((e*(a=Math.pow(10,Math.max(r,n)))-t*a)/a).toFixed(n<=r?r:n)},_mul=function(e,t){var r=0,n=e.toString(),a=t.toString();try{r+=n.split(".")[1].length}catch(e){console.log(e)}try{r+=a.split(".")[1].length}catch(e){console.log(e)}return Number(n.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,r)},_div=function(e,t){var r=0,n=0;try{r=e.toString().split(".")[1].length}catch(e){}try{n=t.toString().split(".")[1].length}catch(e){}return Number(e.toString().replace(".",""))/Number(t.toString().replace(".",""))*Math.pow(10,n-r)},_mod=function(e,t){var r=0,n=0;try{r=e.toString().split(".")[1].length}catch(e){console.log(e)}try{n=t.toString().split(".")[1].length}catch(e){console.log(e)}var a=Math.pow(10,Math.max(r,n));return e*a%(t*a)/a},CalcManager=function(){function t(e){_classCallCheck(this,t),this.result=e}return _createClass(t,[{key:"add",value:function(e){return this.result=_add(this.result,e),this}},{key:"sub",value:function(e,t){return this.result=t?_sub(e,this.result):_sub(this.result,e),this}},{key:"mul",value:function(e){return this.result=_mul(this.result,e),this}},{key:"div",value:function(e,t){return this.result=t?_div(e,this.result):_div(this.result,e),this}},{key:"mod",value:function(e,t){return this.result=t?_mod(e,this.result):_mod(this.result,e),this}},{key:"extend",value:function(e){var t=arguments;if("function"==typeof e){for(var r=arguments.length,n=new Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=t[a];this.result=e.apply(void 0,[this.result].concat(n))}return this}},{key:"val",value:function(){return Number(this.result||0)}}]),t}(),Calc=function(e){return new CalcManager(e)};exports.Calc=Calc,exports.RegEx=RegEx,exports.Storage=Storage,exports.URL=URL,exports.Utils=Utils;
